## Memory Game - Android приложение

### Упрощенная архитектура взаимодействия

```mermaid
graph TB
    subgraph "Memory Game - Android Application"
        UI[Пользовательский интерфейс<br/>Activities & Fragments]
        
        subgraph "Игровые режимы"
            Single[Одиночная игра<br/>против времени]
            Coop[Кооперативная игра<br/>2 игрока на одном устройстве]
            Online[Онлайн-игра<br/>2 игрока через интернет]
        end
        
        subgraph "Бизнес-логика"
            Logic[Игровая механика<br/>Проверка совпадений, подсчёт очков]
            Stats[Менеджер статистики<br/>SharedPreferences]
        end
        
        subgraph "Внешние сервисы"
            Firebase[Firebase Realtime Database<br/>Синхронизация онлайн-игр]
            Auth[Firebase Authentication<br/>Анонимная аутентификация]
        end
    end
    
    UI --> Single
    UI --> Coop
    UI --> Online
    
    Single --> Logic
    Coop --> Logic
    Online --> Logic
    
    Logic --> Stats
    
    Online --> Firebase
    Online --> Auth
    
    style Single fill:#e1f5e1
    style Coop fill:#e3f2fd
    style Online fill:#fff3e0
    style Firebase fill:#ffebee
    style Auth fill:#ffebee
```

Зелёным цветом отображены игровые режимы, реализованные в приложении.

Красным цветом отображены внешние сервисы Firebase, используемые для онлайн-режима.

### Описание функционала Memory Game

**Memory Game** — мобильное приложение для платформы Android, предназначенное для тренировки памяти и внимания. Приложение реализует классическую игру "Найди пару" с поддержкой различных режимов игры.

Приложение разработано на языке Kotlin с использованием архитектурного паттерна MVVM. Минимальная поддерживаемая версия Android — 7.0 (API 24), целевая версия — Android 14.0 (API 34).

**Основной функционал:**

- Три игровых режима: одиночная игра, кооперативная игра на одном устройстве, онлайн-игра через интернет
- Три уровня сложности: 12, 16 и 20 карточек
- Система подсчёта очков и ведения статистики
- Синхронизация онлайн-игр в реальном времени через Firebase Realtime Database
- Анонимная аутентификация пользователей для онлайн-режима

**Технологический стек:**

- Язык программирования: Kotlin 1.9.0
- Архитектура: MVVM (Model-View-ViewModel)
- UI: XML Layouts, View Binding, RecyclerView, Material Design Components
- Асинхронность: Kotlin Coroutines, Flow
- Локальное хранилище: SharedPreferences
- Онлайн-синхронизация: Firebase Realtime Database, Firebase Authentication
- Система сборки: Gradle 8.2+

Исходный код доступен по ссылке: [GitHub Repository](https://github.com/BeloeColeno/MemoryGame)

---

## Демонстрация пользовательского интерфейса

### Главное меню

![Главное меню приложения](screenshots/menu.png)

Главный экран приложения. Пользователь может выбрать режим игры, просмотреть статистику или перейти в настройки.

### Выбор режима игры

![Выбор режима игры](screenshots/mode_selection.png)

Экран выбора режима игры. Доступны три режима: одиночная игра, кооперативная игра и онлайн-игра.

### Одиночная игра

![Игровой процесс - одиночная игра](screenshots/game_single.png)

Режим одиночной игры. На экране отображается сетка карточек, таймер и счётчик найденных пар. Игрок переворачивает карточки, пытаясь найти совпадающие пары до истечения времени.

### Кооперативная игра

![Игровой процесс - кооперативная игра](screenshots/game_coop.png)

Режим кооперативной игры для двух игроков на одном устройстве. На экране отображается индикация текущего хода (синий фон для Игрока 1, красный для Игрока 2), счётчики найденных пар для обоих игроков. При нахождении пары ход остаётся у того же игрока, при промахе переходит к сопернику.

### Онлайн-режим: Лобби

![Онлайн-режим - лобби](screenshots/online_lobby.png)

Лобби онлайн-игры. Игрок может создать новую игровую комнату или присоединиться к существующей. Отображается список доступных комнат с информацией об уровне сложности и режиме таймера.

### Онлайн-режим: Комната ожидания

![Онлайн-режим - ожидание](screenshots/online_waiting.png)

Комната ожидания после создания игры. Отображается ID комнаты, который нужно передать второму игроку. Хост ожидает присоединения второго игрока и может начать игру кнопкой "Начать игру".

### Онлайн-режим: Игровой процесс

![Онлайн-режим - игра](screenshots/online_game.png)

Игровой процесс в онлайн-режиме. Все действия игроков синхронизируются в реальном времени через Firebase. Отображаются счётчики обоих игроков и индикация текущего хода. Время синхронизации действий составляет менее 1 секунды.

### Результаты игры

![Экран результатов](screenshots/game_results.png)

Экран с результатами игры. Отображается победитель, количество найденных пар каждым игроком, затраченное время. Результат сохраняется в статистику.

### Статистика

![Статистика игр](screenshots/statistics.png)

Экран статистики. Отображается общее количество сыгранных партий, количество побед, процент побед, лучшее и среднее время прохождения для каждого режима игры. Статистика ведётся отдельно для одиночного, кооперативного и онлайн-режимов.

---

## Схема взаимодействия в онлайн-режиме

```mermaid
sequenceDiagram
    participant Player1 as Игрок 1 (Хост)
    participant Firebase as Firebase Realtime Database
    participant Player2 as Игрок 2 (Гость)
    
    Note over Player1,Player2: Создание игры и подключение
    
    Player1->>Firebase: Создание комнаты<br/>createRoom(level, timer)
    Firebase-->>Player1: Возврат ID комнаты
    
    Player2->>Firebase: Подписка на обновления<br/>observeRoom(roomId)
    Player2->>Firebase: Присоединение к комнате<br/>joinRoom(roomId)
    
    Firebase-->>Player1: Уведомление о присоединении<br/>Игрока 2
    Firebase-->>Player2: Подтверждение присоединения
    
    Player1->>Firebase: Запуск игры<br/>startGame(roomId)
    Firebase-->>Player1: Игра началась
    Firebase-->>Player2: Игра началась
    
    Note over Player1,Player2: Игровой процесс
    
    Player1->>Firebase: Ход игрока<br/>makeMove(cardId: 1)
    Firebase-->>Player2: Синхронизация<br/>Карта 1 открыта
    
    Player1->>Firebase: Ход игрока<br/>makeMove(cardId: 5)
    Firebase-->>Player2: Синхронизация<br/>Карта 5 открыта
    
    Note over Firebase: Проверка совпадения<br/>Карты не совпадают
    
    Firebase-->>Player1: Ход переходит к Игроку 2
    Firebase-->>Player2: Ваш ход
    
    Player2->>Firebase: Ход игрока<br/>makeMove(cardId: 2)
    Firebase-->>Player1: Синхронизация<br/>Карта 2 открыта
    
    Player2->>Firebase: Ход игрока<br/>makeMove(cardId: 6)
    Firebase-->>Player1: Синхронизация<br/>Карта 6 открыта
    
    Note over Firebase: Проверка совпадения<br/>Карты совпадают
    
    Firebase-->>Player2: Пара найдена<br/>Продолжайте ход
    Firebase-->>Player1: Игрок 2 нашёл пару
    
    Note over Player1,Player2: Игра продолжается<br/>до нахождения всех пар
    
    Firebase-->>Player1: Игра завершена<br/>Результаты
    Firebase-->>Player2: Игра завершена<br/>Результаты
```

Синхронизация между клиентами происходит через Firebase Realtime Database. При каждом действии игрока данные отправляются в Firebase, который автоматически уведомляет всех подписанных клиентов об изменениях. Время синхронизации составляет менее 1 секунды благодаря использованию WebSocket соединений Firebase.

---
